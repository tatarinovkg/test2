:root {
            color-scheme: light dark;

            
            --color-bg: #ffffff;
            --color-fg: #0f172a;

            
            --elev-0: #ffffff;               
            --elev-1: rgba(255,255,255,0.95);
            --elev-2: rgba(255,255,255,0.98);

            --border: #e2e8f0;               
            --muted: #64748b;                
            --muted-2: #94a3b8;              
            --chip: #eef2ff;                 

            --brand: #5B7CFA;
            --brand-strong: #3E57B8;

            
            --header-bg: rgba(255,255,255,0.68);
            --header-border: rgba(226,232,240,0.8);
            --header-blur: 8px;

            
            --wm-svc: rgba(91,124,250,0.12);
            --wm-emoji-op: 0.14;

            
            --marquee-duration: 10s;
            --marquee-shift: 0px;
        }

        .dark :root {
            
            --color-bg: #0a0f1a;             
            --color-fg: #e7eaf0;             

            
            --elev-0: #0a0f1a;               
            --elev-1: rgba(24,34,54,0.96);   
            --elev-2: rgba(34,48,72,0.96);   

            --border: #1f2937;               
            --muted: #a3b2c5;                
            --muted-2: #cfd7e2;
            --chip: #1e2a3f;                 

            
            --header-bg: rgba(20,30,48,0.58);
            --header-border: rgba(34,48,72,0.65);

            
            --wm-svc: rgba(91,124,250,0.26);
            --wm-emoji-op: 0.28;

            
            --icon: #e6edf7;                 
        }
        :root { --icon: #64748b; }         

        
        html, body { height: 100%; }
        html { -webkit-text-size-adjust: 100%; touch-action: manipulation; }
        body {
            background: var(--color-bg);
            color: var(--color-fg);
            overscroll-behavior: none;
            min-height: 100dvh;
        }
        input, select, textarea { font-size: 16px; }

        * { -webkit-tap-highlight-color: transparent; }

        .line-clamp-2 { display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
        .break-anywhere { overflow-wrap:anywhere; word-break:break-word; }

        .animate-in { animation: fadeSlideUp .22s ease-out both; }
        @keyframes fadeSlideUp { from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)} }

        
        header.sticky {
            -webkit-backdrop-filter: blur(var(--header-blur));
            backdrop-filter: blur(var(--header-blur));
            background-color: var(--header-bg);
            border-bottom: 1px solid var(--header-border);
            transform: translateZ(0);
            will-change: transform;
        }

        
        header.repaint {
            transform: translateZ(0.1px); 
            will-change: transform;
        }

        
        #appTitleWrap { position: relative; overflow: hidden; }
        #appTitle { white-space: nowrap; margin: 0; }
        #appTitleText { display: inline-block; will-change: transform; transform: translateX(0); }
        #appTitleWrap.scrolling #appTitleText { animation: title-marquee var(--marquee-duration) linear infinite; }
        @keyframes title-marquee {
            0%,10% { transform: translateX(0); }
            90%,100% { transform: translateX(var(--marquee-shift)); }
        }
        @media (prefers-reduced-motion: reduce) {
            #appTitleWrap.scrolling #appTitleText { animation: none; }
        }

        
        @media (hover: none) {
            button:hover, a:hover, [role="button"]:hover {
                background: inherit !important;
                color: inherit !important;
                box-shadow: none !important;
            }
        }
        .no-focus-outline:focus:not(:focus-visible) { outline: none !important; }
        .btn-pressable:active { transform: translateY(0.5px); filter: saturate(0.98) brightness(0.98); }

        
        .search-clear {
            position: absolute; right: 8px; top: 50%; transform: translateY(-50%);
            width: 36px; height: 36px; display: none;
            align-items: center; justify-content: center;
            border-radius: 9999px; cursor: pointer; user-select: none;
        }
        .search-clear svg { width: 14px; height: 14px; pointer-events: none; display: block; color: var(--icon); }
        @media (hover: hover) and (pointer: fine) {
            .search-clear { display: flex; }
            .search-clear:hover { background: rgba(15, 23, 42, 0.06); }
            .dark .search-clear:hover { background: rgba(148,163,184,0.12); }
            .search-clear:active { transform: translateY(-50%) scale(0.98); }
        }
        .search-clear.is-empty { visibility: hidden; pointer-events: none; }

        
        .svc-card, .grp-card {
            background: var(--elev-1);
            border: 1px solid var(--border);
            border-radius: 14px;
            position: relative;
            overflow: hidden;
        }

        
        @media (hover: hover) and (pointer: fine) {
            .svc-card:hover, .grp-card:hover, .row-hover:hover {
                box-shadow: 0 10px 24px -16px rgba(0,0,0,.20);
                transform: translateY(-1px);
            }
            .svc-card .svc-chevron, .grp-card .grp-chevron { opacity: .9; transform: translateX(2px); }
        }
        .svc-card:active, .grp-card:active { transform: scale(0.997); }

        .svc-subtle { color: var(--muted); }
        .dark .svc-subtle { color: var(--muted-2); }

        
        .grp-inner { display: flex; align-items: center; gap: 10px; padding: 12px 14px; }
        @media (hover:hover) and (pointer:fine) { .grp-inner { padding: 10px 14px; } }
        .grp-title { font-weight: 700; line-height: 1.25; color: var(--brand); font-size: 1.02rem; }
        @media (min-width: 768px) { .grp-title { font-size: 1rem; } }

        
        .wm, .svc-watermark, .grp-watermark, .sr-watermark { position: relative; overflow: hidden; }
        .wm::after, .svc-watermark::after, .grp-watermark::after, .sr-watermark::after {
            position: absolute; right: 10px; bottom: -4px; line-height: 1;
            pointer-events: none; user-select: none; content: "";
        }

        
        .svc-watermark::after {
            content: attr(data-mark);
            font-weight: 800;
            font-size: 44px;
            color: var(--wm-svc);
        }

        
        .grp-watermark::after, .sr-watermark::after {
            content: attr(data-emoji);
            font-size: 48px;
            opacity: var(--wm-emoji-op);
        }
        .dark .grp-watermark::after,
        .dark .sr-watermark::after {
            opacity: var(--wm-emoji-op);
            filter: brightness(1.22) saturate(1.18); 
        }
        .grp-watermark[data-emoji=""]::after, .sr-watermark[data-emoji=""]::after { content: ""; }

        
        .row-chevron, .grp-chevron {
            opacity: .7;
            transition: transform .15s ease, opacity .15s ease;
            flex-shrink: 0; display: inline-flex; align-items: center; justify-content: center;
        }
        .row-chevron svg, .grp-chevron svg { color: var(--icon); }
        @media (hover:hover) and (pointer:fine) {
            .row-hover:hover .row-chevron,
            .row-hover:hover .grp-chevron { transform: translateX(2px); opacity: .95; }
        }

        
        

        
        .svc-chip {
            min-width: 24px; height: 24px;
            border-radius: 8px;
            background: var(--chip);
            display: inline-flex; align-items: center; justify-content: center;
            font-size: 14px; line-height: 1;
        }

        
        #appTitleWrap { position: relative; overflow: hidden; }
        
        #appTitle.fade-swap { animation: titleSwap .18s ease-out; }
        @keyframes titleSwap { from { opacity:.25; transform: translateY(2px); } to { opacity:1; transform:none; } }

        
        #appTitle.loading::after {
            content:"";
            display:inline-block;
            vertical-align:middle;
            width: 6ch;               
            height: 0.9em;
            margin-left: .4ch;
            border-radius: 6px;
            background: linear-gradient(90deg, rgba(148,163,184,.18), rgba(255,255,255,.4), rgba(148,163,184,.18));
            animation: ttlSk 1.2s ease-in-out infinite;
        }
        @keyframes ttlSk { 0%{background-position:-150% 0} 100%{background-position:250% 0} }
        .dark #appTitle.loading::after {
            background: linear-gradient(90deg, rgba(71,85,105,.25), rgba(255,255,255,.15), rgba(71,85,105,.25));
        }


/* Carousel helpers */
#pcThumbs::-webkit-scrollbar{ height: 6px; }
#pcThumbs::-webkit-scrollbar-thumb{ background: rgba(148,163,184,.5); border-radius: 9999px; }



/* Active thumbnail highlight */
.pc-thumb.pc-thumb-active {
  outline: 2px solid var(--brand, #3b82f6);
  outline-offset: 2px;
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--brand, #3b82f6) 40%, transparent);
  border-color: color-mix(in oklab, var(--brand, #3b82f6) 60%, transparent);
}

/* Ensure hero image centers perfectly and avoids top whitespace */
#photoCarousel .bg-slate-50, #photoCarousel .dark\:bg-slate-800 {
  min-height: 260px;
}
#pcHero { 
  display: block;
  max-height: min(72vh, 860px);
  width: 100%;
  height: auto;
  object-fit: contain;
}


/* Gallery arrows - always circular, semi-transparent */
.pc-arrow{position:absolute;top:50%;transform:translateY(-50%);display:inline-grid;place-items:center;height:2.5rem;width:2.5rem;border-radius:9999px;background:#ffffff;color:#0f172a;box-shadow:0 2px 8px rgba(15,23,42,.25);z-index:10;}

.pc-arrow.hidden{ display:none; }

/* Thumbnail active frame applied to IMG to avoid clipping artifacts */
.pc-thumb img{
  display:block;
  height:4rem;
  width:6rem;
  object-fit:cover;
  border-radius:.5rem;
  box-shadow: none;
}
.pc-thumb img.pc-thumb-active{
  box-shadow: 0 0 0 3px var(--brand, #3b82f6) inset, 0 0 0 2px var(--brand, #3b82f6);
}

/* Center hero image and tune height via JS (fitHero) */
#photoCarousel .bg-slate-50, #photoCarousel .dark\:bg-slate-800 {
  display:grid;
  place-items:center;
}
#pcHero{
  display:block;
  max-height: min(72vh, 860px);
  width:100%;
  height:auto;
  object-fit: contain;
}

/* Thumbnail frame keeps aspect ratio of image (no crop) */
#pcThumbs{ scroll-snap-type: x mandatory; }
.pc-thumb{
  position: relative;
  flex: 0 0 auto;
  width: 6rem;
  height: 4rem;
  border-radius: .5rem;
  border: 1px solid rgba(100,116,139,.4);
  background: rgba(241,245,249,.8);
  display: grid;
  place-items: center;
  overflow: hidden;
  scroll-snap-align: center;
}
.pc-thumb img{
  max-width: 100%;
  max-height: 100%;
  width: auto;
  height: auto;
  object-fit: contain;
  border-radius: .375rem;
  display:block;
}
/* Clear, consistent active outline */
.pc-thumb img.pc-thumb-active{
  outline: 2px solid var(--brand, #3b82f6);
  outline-offset: 2px;
  box-shadow: 0 0 0 2px var(--brand, #3b82f6);
}


/* Thumbnails: same height, proportional width */
#pcThumbs{ display:flex; gap:.5rem; overflow-x:auto; padding-bottom:.25rem; scroll-snap-type:x mandatory; }
.pc-thumb{
  scroll-snap-align:center;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  height:4rem;           /* unified height */
  padding:.125rem .25rem;
  border:1px solid rgba(100,116,139,.35);
  border-radius:.75rem;
  background:rgba(241,245,249,.85);
}
.pc-thumb img{
  height:3.5rem;         /* image follows height */
  width:auto;            /* width scales proportionally */
  object-fit:contain;
  display:block;
}
/* Active state on the BUTTON for a clean outline */
.pc-thumb.is-active{
  outline: 2px solid var(--brand, #3b82f6);
  outline-offset: 2px;
  box-shadow: 0 0 0 2px var(--brand, #3b82f6);
  border-color: color-mix(in oklab, var(--brand, #3b82f6) 60%, transparent);
  background:#fff;
}


/* --- Thumbnails refined (no outer field, outline on image only) --- */
#pcThumbs{
  display:flex;
  gap:.5rem;
  overflow-x:auto;
  padding-bottom:.25rem;
  scroll-snap-type:x mandatory;
  position: relative;
  z-index: 1;            /* avoid being covered */
}
.pc-thumb{
  scroll-snap-align:center;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  height:4rem;           /* unified height */
  padding:0;             /* no inner field */
  border:none;           /* remove grey border */
  background:transparent;
  overflow:visible;      /* let outline show fully */
}
.pc-thumb img{
  height:4rem;
  width:auto;
  object-fit:contain;
  display:block;
  border-radius:.5rem;   /* soft rounding of the photo itself */
}
.pc-thumb.is-active img{
  outline: 1.5px solid var(--brand, #3b82f6);  /* thin blue outline */
  outline-offset: 2px;
  box-shadow: none;      /* no thick glow */
}

/* Arrows: solid circle, no animations */
.pc-arrow{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  display:inline-grid;
  place-items:center;
  height:2.5rem;
  width:2.5rem;
  border-radius:9999px;
  background:#fff;          /* always white circle */
  color:#0f172a;
  box-shadow:0 2px 8px rgba(15,23,42,.25);
  z-index:10;
}
.pc-arrow *{ pointer-events:none; } /* ensure click lands on button */
.pc-arrow.hidden{ display:none !important; }

/* Thumbnails: image-only row */
#pcThumbs{
  display:flex;
  gap:.5rem;
  overflow-x:auto;
  padding:.25rem 0 .25rem 0;
  scroll-snap-type:x mandatory;
  align-items:center;
  position:relative;
  z-index:1;
}
.pc-thumb{
  scroll-snap-align:center;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:0;
  background:transparent;
  border:none;
  height:4rem;
}
.pc-thumb img{
  height:4rem;      /* unify height */
  width:auto;       /* keep aspect ratio */
  object-fit:contain;
  display:block;
  border-radius:.5rem;
}
.pc-thumb.is-active img{
  outline:1px solid var(--brand, #3b82f6);
  outline-offset:2px;
}

/* Hero caption spacing */
#pcCaption{ margin-top:.25rem; }

/* Ensure hero centers and scales without white bars dominance */
#photoCarousel .bg-slate-50, #photoCarousel .dark\:bg-slate-800 { display:grid; place-items:center; }
#pcHero{ display:block; max-height:min(72vh, 860px); width:100%; height:auto; object-fit:contain; }


/* --- Photo UI enhancements (2025-10-04) --- */
.photo-hero {
  border: 1px solid color-mix(in srgb, #0f172a 12%, transparent);
  border-radius: 12px;
  background: #ffffff;
}
.dark .photo-hero {
  border-color: color-mix(in srgb, #94a3b8 25%, transparent);
  background: #0b1220;
}
.photo-caption {
  margin-top: .5rem;
  font-size: .9rem;
  color: #334155;
}
.dark .photo-caption {
  color: #cbd5e1;
}
.photo-section-title{
  font-weight: 700;
  font-size: 1.125rem;
  line-height: 1.75rem;
  margin-top: .5rem;
}
.arrow-btn-fix {
  background: #ffffff !important;
  border-radius: 9999px !important;
  box-shadow: 0 6px 20px rgba(0,0,0,.15) !important;
  border: 1px solid rgba(255,255,255,.9) !important;
}
/* Remove thick border around the whole block in carousels; keep focus on the image */
#photoCarousel .relative {
  border: 0 !important;
}


/* --- Arrow buttons: solid white, no effects (2025-10-04) --- */
.arrow-btn-fix,
.arrow-btn-fix:hover,
.arrow-btn-fix:active,
.arrow-btn-fix:focus {
  background: #ffffff !important;
  border-radius: 9999px !important;
  border: none !important;
  box-shadow: none !important;
  opacity: 1 !important;
  transition: none !important;
  outline: none !important;
}

.photo-caption{ display:none !important; }


/* --- Thumbnails strip (2025-10-04) --- */
#pcThumbs{ overflow-y: visible; scroll-padding-left: 8px; scroll-padding-right: 8px; }
.pc-thumb{ flex: 0 0 auto; border: 0; padding: 0; background: transparent; line-height: 0; border-radius: 12px; }
.pc-thumb img{ display:block; height: 64px; width: auto; border-radius: 12px; }
.pc-thumb.is-active img{ outline: 2px solid #3b82f6; outline-offset: 0; }
.dark .pc-thumb.is-active img{ outline-color: #60a5fa; }


/* --- Thumbnails: hide scrollbar & kill focus rings/backgrounds --- */
#pcThumbs { -ms-overflow-style: none; scrollbar-width: none; }
#pcThumbs::-webkit-scrollbar { display: none; height: 0; width: 0; background: transparent; }

.pc-thumb { outline: none !important; box-shadow: none !important; }
.pc-thumb:focus, .pc-thumb:focus-visible, .pc-thumb:hover, .pc-thumb:active {
  outline: none !important;
  box-shadow: none !important;
  background: transparent !important;
  -webkit-tap-highlight-color: transparent;
}

.pc-thumb img { background: transparent !important; }


/* --- Thumbnails polish (no white gaps, tight spacing) --- */
#pcThumbs { gap: 6px !important; padding-bottom: 0 !important; }
#pcThumbs { -ms-overflow-style: none; scrollbar-width: none; }
#pcThumbs::-webkit-scrollbar { display: none; height: 0; width: 0; background: transparent; }

.pc-thumb {
  flex: 0 0 auto;
  margin: 0 !important;
  padding: 0 !important;
  background: transparent !important;
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
  -webkit-appearance: none;
  appearance: none;
  line-height: 0;
  border-radius: 12px;
  overflow: hidden; /* ensure rounded corners clip img */
}
.pc-thumb img{
  display: block;
  height: 64px;
  width: auto;
  border-radius: inherit;
  background: transparent !important;
}
.pc-thumb:focus, .pc-thumb:hover, .pc-thumb:active, .pc-thumb:focus-visible {
  outline: none !important;
  box-shadow: none !important;
  background: transparent !important;
}
/* Active outline only */
.pc-thumb.is-active img{ outline: 2px solid #3b82f6; outline-offset: 0; }
.dark .pc-thumb.is-active img{ outline-color: #60a5fa; }


/* === Uniform thumbnail row (preview) === */
:root{
  --thumb-h: 86px;
  --thumb-gap: 14px;
  --thumb-radius: 12px;
}

#pcThumbs{
  display:flex !important;
  gap: var(--thumb-gap) !important;
  overflow-x:auto !important;
  padding: 12px 12px !important;      /* ровные отступы слева/справа */
  margin-top: 12px !important;
  align-items: center !important;
  scroll-padding-left: 12px;
  scroll-padding-right: 12px;
}

#pcThumbs .pc-thumb{
  display:inline-flex;
  margin:0 !important;
  padding:0 !important;
  border:0 !important;
  background: transparent !important;
  line-height: 0;
  border-radius: 0 !important; /* скругляем только фото */
}

#pcThumbs .pc-thumb img{
  display:block;
  height: var(--thumb-h) !important;  /* одинаковая высота */
  width: auto !important;             /* ширина по соотношению */
  border-radius: var(--thumb-radius) !important;
  object-fit: contain !important;     /* без кропа */
  background: transparent !important; /* без белых карточек */
  box-shadow: 0 4px 10px rgba(2,6,23,.06);
  pointer-events:none;
  user-select:none;
}

#pcThumbs .pc-thumb.is-active img{
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}
/* === /Uniform thumbnail row (preview) === */


/* Hide thumbnails preview entirely */
#pcThumbs{ display:none !important; height:0 !important; padding:0 !important; margin:0 !important; }


/* iOS image rounding fix and utilities */
.photo-rounded-fix {
  overflow: hidden;
  border-radius: 0.75rem;
  -webkit-mask-image: -webkit-radial-gradient(white, black);
  mask-image: radial-gradient(circle, white, black);
}
.photo-control-bar {
  display: flex;
  gap: 1rem;
  align-items: center;
  justify-content: center;
  margin-top: 0.75rem;
}

